import{r as s,j as e}from"./index-CxbT5qk9.js";import{s as E,C as I,a as H,b as L,c as w,d as n,e as _,f as r,h as A,i as F,j as R,k as z,l as G,t as P,v as U,w as q}from"./api-DXpaVv3W.js";import{C as J,a as K,b as O,c as Q}from"./CRow-AZwQA-Dc.js";import{a as l}from"./axios-CpoBjWNN.js";import{C as c}from"./CFormInput-DqzrL_8W.js";import"./DefaultLayout-OQTJHyH4.js";const ee=()=>{const[b,i]=s.useState([]),[S,o]=s.useState(!1),[d,h]=s.useState(null),[m,x]=s.useState(""),[j,C]=s.useState(""),[u,p]=s.useState(""),[k,f]=s.useState(null);s.useEffect(()=>{D()},[]);const D=async()=>{const t=(await E()).data.data.sort((v,B)=>v.id-B.id);i(t)},y=async()=>{const a=await E();i(a.data.data)},T=async()=>{const a={name:m,start_date:j,location:u,file:k};try{d?await P(d.id,a):await U(a),o(!1),h(null),y()}catch(t){console.error("Error:",t)}},M=async a=>{try{await q(a),y()}catch(t){console.error("Error:",t)}},g=(a=null)=>{h(a),x(a?a.name:""),C(a?a.start_date:""),p(a?a.location:""),f(null),o(!0)},N=a=>{const t={year:"numeric",month:"long",day:"numeric"};return new Date(a).toLocaleDateString("id-ID",t)};return e.jsxs(J,{children:[e.jsx(K,{children:e.jsxs(O,{children:[e.jsx(I,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Event"}),e.jsx(l,{color:"primary",onClick:()=>g(),children:"Add event"})]})}),e.jsx(Q,{children:e.jsxs(H,{hover:!0,children:[e.jsx(L,{children:e.jsxs(w,{children:[e.jsx(n,{children:"Id"}),e.jsx(n,{children:"Gambar"}),e.jsx(n,{children:"Nama Event"}),e.jsx(n,{children:"Tanggal"}),e.jsx(n,{children:"Lokasi"}),e.jsx(n,{children:"Aksi"})]})}),e.jsx(_,{children:b.map(a=>e.jsxs(w,{children:[e.jsx(r,{children:a.id}),e.jsx(r,{children:e.jsx(A,{size:"md",width:100,height:100,src:a.imageUrl})}),e.jsx(r,{children:a.name}),e.jsx(r,{children:N(a.startDate)}),e.jsx(r,{children:a.location}),e.jsxs(r,{children:[e.jsx(l,{color:"warning",onClick:()=>g(a),children:"Edit"}),e.jsx(l,{color:"danger",onClick:()=>M(a.id),children:"Delete"})]})]},a.id))})]})})]})}),e.jsxs(F,{visible:S,onClose:()=>o(!1),children:[e.jsx(R,{closeButton:!0,children:d?"Edit event":"Add event"}),e.jsxs(z,{children:[e.jsx(c,{type:"text",placeholder:"Nama Event",name:"name",value:m,onChange:a=>x(a.target.value),className:"mt-2"}),e.jsx(c,{type:"date",placeholder:"Pilih start",name:"start_date",value:j,onChange:a=>C(a.target.value),className:"mt-2"}),e.jsx(c,{type:"text",placeholder:"Lokasi",className:"mt-2",name:"location",value:u,onChange:a=>p(a.target.value)}),e.jsx(c,{type:"file",name:"file",className:"mt-2",onChange:a=>f(a.target.files[0])})]}),e.jsxs(G,{children:[e.jsx(l,{color:"primary",onClick:T,children:"Save"}),e.jsx(l,{color:"secondary",onClick:()=>o(!1),children:"Cancel"})]})]})]})};export{ee as default};
