import{r as l,j as e}from"./index-CxbT5qk9.js";import{x as O,C as G,a as L,b as P,c as S,d as h,e as U,f as p,h as q,i as J,j as K,k as Q,l as V,y as W,z as X}from"./api-DXpaVv3W.js";import{C as Y,a as Z,b as _,c as $}from"./CRow-AZwQA-Dc.js";import{a as r}from"./axios-CpoBjWNN.js";import{C as n}from"./CFormInput-DqzrL_8W.js";import{C as H}from"./CFormTextarea-C7Refwfb.js";import"./DefaultLayout-OQTJHyH4.js";const oe=()=>{const[A,D]=l.useState([]),[E,d]=l.useState(!1),[C,g]=l.useState(null),[y,v]=l.useState(""),[f,M]=l.useState(""),[B,k]=l.useState(null),[x,N]=l.useState(""),[o,j]=l.useState([{type:"",price:""}]),[c,m]=l.useState([{name:"",description:""}]);l.useEffect(()=>{u()},[]);const u=async()=>{const s=await O();D(s.data.data)},F=async()=>{const s={name:y,description:f,file:B};try{C?await W(C.id,s,x,o,c):await X(s,x,o,c),d(!1),g(null),u()}catch(a){console.error("Error:",a)}},I=async s=>{try{await deleteMuseum(s),u()}catch(a){console.error("Error:",a)}},T=(s=null)=>{g(s),v(s?s.name:""),M(s?s.description:""),k(null),N(s?s.operatingHours:""),j(s?s.tickets:[{type:"",price:""}]),m(s?s.collections:[{name:"",description:""}]),d(!0)},R=()=>{j([...o,{type:"",price:""}])},b=(s,a,t)=>{const i=[...o];i[s][a]=t,j(i)},z=()=>{m([...c,{name:"",description:""}])},w=(s,a,t)=>{const i=[...c];i[s][a]=t,m(i)};return e.jsxs(Y,{children:[e.jsx(Z,{children:e.jsxs(_,{children:[e.jsx(G,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Museums"}),e.jsx(r,{color:"primary",onClick:()=>T(),children:"Add Museum"})]})}),e.jsx($,{children:e.jsxs(L,{hover:!0,children:[e.jsx(P,{children:e.jsxs(S,{children:[e.jsx(h,{children:"Id"}),e.jsx(h,{children:"Gambar"}),e.jsx(h,{children:"Nama"}),e.jsx(h,{children:"Aksi"})]})}),e.jsx(U,{children:A.map(s=>e.jsxs(S,{children:[e.jsx(p,{children:s.id}),e.jsx(p,{children:e.jsx(q,{size:"md",width:100,height:100,src:s.imageUrl})}),e.jsx(p,{children:s.name}),e.jsxs(p,{children:[e.jsx(r,{color:"warning",onClick:()=>T(s),children:"Edit"}),e.jsx(r,{color:"danger",onClick:()=>I(s.id),children:"Delete"})]})]},s.id))})]})})]})}),e.jsxs(J,{visible:E,onClose:()=>d(!1),children:[e.jsx(K,{closeButton:!0,children:C?"Edit Museum":"Add Museum"}),e.jsxs(Q,{children:[e.jsx(n,{type:"text",placeholder:"Name",value:y,onChange:s=>v(s.target.value),className:"mt-2"}),e.jsx(H,{placeholder:"Description",value:f,onChange:s=>M(s.target.value),className:"mt-2"}),e.jsx(n,{type:"file",onChange:s=>k(s.target.files[0]),className:"mt-2"}),e.jsx(n,{type:"text",placeholder:"Operating Hours",value:x,onChange:s=>N(s.target.value),className:"mt-2"}),e.jsx("h5",{children:"Tickets"}),o.map((s,a)=>e.jsxs("div",{className:"mt-2",children:[e.jsx(n,{type:"text",placeholder:"Type",value:s.type,onChange:t=>b(a,"type",t.target.value)}),e.jsx(n,{type:"text",placeholder:"Price",value:s.price,onChange:t=>b(a,"price",t.target.value),className:"mt-2"})]},a)),e.jsx(r,{color:"secondary",onClick:R,className:"mt-2",children:"Add Ticket"}),e.jsx("h5",{children:"Collections"}),c.map((s,a)=>e.jsxs("div",{className:"mt-2",children:[e.jsx(n,{type:"text",placeholder:"Name",value:s.name,onChange:t=>w(a,"name",t.target.value)}),e.jsx(H,{placeholder:"Description",value:s.description,onChange:t=>w(a,"description",t.target.value),className:"mt-2"})]},a)),e.jsx(r,{color:"secondary",onClick:z,className:"mt-2",children:"Add Collection"})]}),e.jsxs(V,{children:[e.jsx(r,{color:"primary",onClick:F,children:"Save"}),e.jsx(r,{color:"secondary",onClick:()=>d(!1),children:"Cancel"})]})]})]})};export{oe as default};
