import{r as s,j as e}from"./index-CxbT5qk9.js";import{o as T,C as M,a as B,b as N,c as y,d as t,e as P,f as n,h as W,i as D,j as F,k as H,l as I,p as A,q as R,r as q}from"./api-DXpaVv3W.js";import{C as z,a as K,b as U,c as G}from"./CRow-AZwQA-Dc.js";import{a as l}from"./axios-CpoBjWNN.js";import{C as f}from"./CFormInput-DqzrL_8W.js";import{C as J}from"./CFormTextarea-C7Refwfb.js";import"./DefaultLayout-OQTJHyH4.js";const _=()=>{const[g,b]=s.useState([]),[w,o]=s.useState(!1),[i,d]=s.useState(null),[h,x]=s.useState(""),[C,m]=s.useState(""),[v,j]=s.useState(null);s.useEffect(()=>{c()},[]);const c=async()=>{const a=await T();b(a.data.data)},S=async()=>{const a={name:h,description:C,file:v};try{i?await A(i.id,a):await R(a),o(!1),d(null),c()}catch(r){console.error("Error:",r)}},k=async a=>{try{await q(a),c()}catch(r){console.error("Error:",r)}},u=(a=null)=>{d(a),x(a?a.name:""),m(a?a.description:""),j(null),o(!0)},E=(a,r)=>{if(!a)return"-";const p=a.split(" ");return p.length>r?p.slice(0,r).join(" ")+"...":a};return e.jsxs(z,{children:[e.jsx(K,{children:e.jsxs(U,{children:[e.jsx(M,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Wayang"}),e.jsx(l,{color:"primary",onClick:()=>u(),children:"Add Wayang"})]})}),e.jsx(G,{children:e.jsxs(B,{hover:!0,children:[e.jsx(N,{children:e.jsxs(y,{children:[e.jsx(t,{children:"Id"}),e.jsx(t,{children:"Wayang"}),e.jsx(t,{children:"Nama Wayang"}),e.jsx(t,{children:"Konten"}),e.jsx(t,{children:"Aksi"})]})}),e.jsx(P,{children:g.map(a=>e.jsxs(y,{children:[e.jsx(n,{children:a.id}),e.jsx(n,{children:e.jsx(W,{size:"md",width:100,height:100,src:a.imageUrl})}),e.jsx(n,{children:a.name}),e.jsx(n,{children:E(a.description,5)}),e.jsxs(n,{children:[e.jsx(l,{color:"warning",onClick:()=>u(a),children:"Edit"}),e.jsx(l,{className:"ml-2",color:"danger",onClick:()=>k(a.id),children:"Delete"})]})]},a.id))})]})})]})}),e.jsxs(D,{visible:w,onClose:()=>o(!1),children:[e.jsx(F,{closeButton:!0,children:i?"Edit Wayang":"Add wayang"}),e.jsxs(H,{children:[e.jsx(f,{type:"text",placeholder:"name",name:"name",value:h,onChange:a=>x(a.target.value),className:"mt-2"}),e.jsx(J,{type:"textarea",placeholder:"description",className:"mt-2",name:"description",value:C,onChange:a=>m(a.target.value)}),e.jsx(f,{type:"file",name:"file",className:"mt-2",onChange:a=>j(a.target.files[0])})]}),e.jsxs(I,{children:[e.jsx(l,{color:"primary",onClick:S,children:"Save"}),e.jsx(l,{color:"secondary",onClick:()=>o(!1),children:"Cancel"})]})]})]})};export{_ as default};
